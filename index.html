<!DOCTYPE html>
<!-- HTML5 -->
<html lang="en-US">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-160868303-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-160868303-1", { anonymize_ip: true, client_storage: "none" });
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

    <title>Andrey Goncharov</title>
    <meta
      name="description"
      content="Senior software engineer at Facebook. OMSCS student at Georgia Tech. Full-stack TypeScript and JavaScript developer. Speaker. Writer. Open-source enthusiast."
    />

    <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="manifest.json" />

    <meta name="msapplication-config" content="browserconfig.xml" />
    <meta name="msapplication-TileColor" content="#000000" />
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
    <meta name="theme-color" content="#000000" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://goncharov.page" />
    <meta property="og:title" content="Andrey Goncharov" />
    <meta property="og:image" content="https://goncharov.page/og-icon.jpg" />
    <meta
      property="og:description"
      content="Senior software engineer at Facebook. OMSCS student at Georgia Tech. Full-stack TypeScript and JavaScript developer. Speaker. Writer. Open-source enthusiast."
    />
    <meta property="og:site_name" content="goncharov.page" />
    <meta property="og:locale" content="en_US" />
    <!-- Next tags are optional but recommended -->
    <meta property="og:image:width" content="1246" />
    <meta property="og:image:height" content="1246" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@ai_goncharov" />
    <meta name="twitter:url" content="https://goncharov.page" />
    <meta name="twitter:title" content="Andrey Goncharov" />
    <meta
      name="twitter:description"
      content="Senior software engineer at Facebook. OMSCS student at Georgia Tech. Full-stack TypeScript and JavaScript developer. Speaker. Writer. Open-source enthusiast."
    />
    <meta name="twitter:image" content="https://goncharov.page/og-icon.jpg" />

    <link rel="alternate" type="application/rss+xml" title="Andrey Goncharov" href="https://blog.goncharov.page/rss.xml" />

    <link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono&display=swap" rel="stylesheet" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU="
      crossorigin="anonymous"
    />

    <style>
      html {
        height: 100%;
      }
      body {
        min-height: 100%;
        background-color: black;
        position: relative;
        color: white;
        font-family: "Share Tech Mono", monospace;
        display: flex;
        flex-direction: row;
        justify-content: center;
      }

      a {
        color: white;
        text-decoration: none;
      }
      a:hover,
      a:focus,
      a:visited {
        opacity: 0.7;
      }

      header {
        margin-bottom: 4rem;
      }

      header h1 {
        font-size: 2rem;
        margin-bottom: 0;
        text-align: center;
      }

      header p {
        text-align: center;
        text-transform: uppercase;
      }

      .terminal {
      }

      .terminal__input_block {
        width: 100%;
        display: flex;
        flex-direction: row;
        align-items: baseline;
      }
      .terminal__input_decoration {
        margin-right: 1rem;
      }

      .terminal__input_wrapper {
        flex: 1;
        min-width: 0;
        position: relative;
      }
      .terminal__input {
        background-color: transparent;
        border: none;
        border-bottom: 1px solid transparent;
        color: white;
        font-size: 1rem;
        height: 100%;
        width: 100%;
        position: relative;
        z-index: 10;
        box-sizing: border-box;
      }
      .terminal__input:focus,
      .terminal__input:hover {
        outline: none;
        border-bottom-color: white;
      }
      .terminal__input_shadow {
        position: absolute;
        display: block;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: transparent;
        border: none;
        border-bottom: 1px solid white;
        color: white;
        font-size: 1rem;
        z-index: 1;
        opacity: 0.5;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <main>
      <header>
        <h1>Andrey Goncharov</h1>
        <p>Software engineer</p>
        <p>London, UK</p>
      </header>
      <section class="terminal">
        <p class="terminal__input_block">
          <span class="terminal__input_decoration">></span>
          <span class="terminal__input_wrapper">
            <input id="terminal_input" class="terminal__input" placeholder="Type 'help' for the list of commands" />
            <input id="terminal_shadow" tabindex="-1" class="terminal__input_shadow" />
          </span>
        </p>
        <p id="terminal_res" class="terminal__res"></p>
      </section>
    </main>
    <script>
      const contacts = [
        {
          name: "Email",
          href: "mailto:andrey@goncharov.page",
        },
        {
          name: "Twitter",
          href: "https://twitter.com/ai_goncharov",
        },
        {
          name: "LinkedIn",
          href: "https://www.linkedin.com/in/aigoncharov",
        },
      ];

      const commands = {
        help: {
          description: "Lists available commands",
          handler: (resNode) => {
            const commandsList = document.createElement("ul");

            commandsList.append(
              ...Object.entries(commands).map(([command, { description }]) => {
                const li = document.createElement("li");
                li.textContent = `${command} - ${description}`;
                return li;
              })
            );

            resNode.appendChild(commandsList);
          },
        },
        about: {
          description: "Displays my bio",
          handler: (resNode) => {
            resNode.textContent = "Opened a new tab with my bio";
            window.open("TODO", "_blank").focus();
          },
        },
        read: {
          description: "Redirects to my blog",
          handler: (resNode) => {
            resNode.textContent = "Opened a new tab with my blog";
            window.open("https://blog.goncharov.page/", "_blank").focus();
          },
        },
        code: {
          description: "Redirects to my Github",
          handler: (resNode) => {
            resNode.textContent = "Opened a new tab with my Github";
            window.open("https://github.com/aigoncharov", "_blank").focus();
          },
        },
        watch: {
          description: "Redirects to my talks",
          handler: (resNode) => {
            resNode.textContent = "Opened a new tab with my talks";
            window.open("https://github.com/aigoncharov/talks", "_blank").focus();
          },
        },
        hire: {
          description: "Redirects to my resume",
          handler: (resNode) => {
            resNode.textContent = "Opened a new tab with my resume";
            window.open("https://docs.google.com/document/d/1RPYnsaEfPMjty0PuX15qI_BG1eO-IJIdPejH67cdi64/edit?usp=sharing", "_blank").focus();
          },
        },
        contact: {
          description: "Show my contacts",
          handler: (resNode) => {
            const contactsList = document.createElement("ul");

            contactsList.append(
              ...contacts.map(({ name, href }) => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.textContent = name;
                a.href = href;
                a.target = "_blank";
                a.rel = "noopener noreferrer";
                li.appendChild(a);
                return li;
              })
            );

            resNode.appendChild(contactsList);
          },
        },
      };

      const unknownCommandHandler = (resNode) => {
        resNode.textContent = "Unknown command";
      };

      class CommandHistory {
        constructor(maxSize) {
          this.data = [];
          this.pointer = null;
          this.maxSize = maxSize;
        }

        append(item) {
          this.pointer = null;

          const existingHistoryItemI = this.data.indexOf(item);
          if (existingHistoryItemI !== -1) {
            this.data.splice(existingHistoryItemI, 1);
          }

          this.data.push(item);

          if (this.data.length > this.maxSize) {
            this.data.shift();
          }
        }

        prev() {
          if (!this.data.length) {
            return "";
          }

          if (this.pointer === null || this.pointer > this.data.length || this.pointer <= 0) {
            this.pointer = this.data.length;
          }

          this.pointer--;

          return this.data[this.pointer];
        }

        next() {
          if (!this.data.length) {
            return "";
          }

          if (this.pointer === null || this.pointer >= this.data.length - 1 || this.pointer < 0) {
            this.pointer = -1;
          }

          this.pointer++;

          return this.data[this.pointer];
        }
      }
      const commandHistory = new CommandHistory(Object.keys(commands).length);

      const terminalInput = document.getElementById("terminal_input");
      const terminalShadow = document.getElementById("terminal_shadow");
      const terminalRes = document.getElementById("terminal_res");

      const findMatchingCommand = (currentVal) =>
        currentVal ? Object.keys(commands).find((commandName) => commandName.startsWith(currentVal) && commandName !== currentVal) : undefined;
      const findExactCommand = (currentVal) => Object.keys(commands).find((commandName) => commandName === currentVal);

      terminalInput.addEventListener(
        "input",
        (e) => {
          let newValue = terminalInput.value;

          const matchingCommand = findMatchingCommand(newValue);
          if (matchingCommand) {
            newValue = matchingCommand;
          }

          terminalShadow.value = newValue;
        },
        { passive: true }
      );

      const setTerminalAndShadow = (value) => {
        terminalInput.value = value;
        terminalShadow.value = value;
      };

      terminalInput.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" || e.key === "Tab") {
          const matchingCommand = findMatchingCommand(terminalInput.value);
          if (matchingCommand) {
            e.preventDefault();
            setTerminalAndShadow(matchingCommand);
          }
          return;
        }
        if (e.key === "ArrowUp") {
          e.preventDefault();
          const historyCommand = commandHistory.prev();
          if (historyCommand) {
            setTerminalAndShadow(historyCommand);
          }
          return;
        }
        if (e.key === "ArrowDown") {
          e.preventDefault();
          const historyCommand = commandHistory.next();
          if (historyCommand) {
            setTerminalAndShadow(historyCommand);
          }
          return;
        }
        if (e.key === "Enter") {
          e.preventDefault();
          const exactCommand = findExactCommand(terminalInput.value);

          if (exactCommand) {
            commandHistory.append(exactCommand);
          }

          const commandHandler = exactCommand ? commands[exactCommand].handler : unknownCommandHandler;

          terminalRes.textContent = "";
          commandHandler(terminalRes);

          setTerminalAndShadow("");

          return;
        }
      });
    </script>
  </body>
</html>
